<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <!-- ==============================================================
       IIS configuration for Django + wfastcgi
       Place this file in:  C:\inetpub\wwwroot\zetaslate\backend\web.config
       ============================================================== -->

  <system.webServer>

    <!-- ❶  Route every request through FastCGI / Python -->
    <handlers>
      <add name="PythonHandler"
           path="*"
           verb="*"
           modules="FastCgiModule"
           scriptProcessor="C:\Python313\python.exe|C:\Python313\Scripts\wfastcgi.py"
           resourceType="Unspecified"
           requireAccess="Script" />
    </handlers>

    <!-- ❷  TEMPORARY diagnostics
           ▸ Delete or keep commented after you’ve fixed the error
           ▸ If you uncomment, recycle IIS (`iisreset`) so it takes effect
    -->
    <!--
    <httpErrors existingResponse="PassThrough" errorMode="Detailed" />
    <asp scriptErrorSentToBrowser="true" />
    -->

  </system.webServer>

  <appSettings>
    <!-- ❸  WSGI application that wfastcgi should load -->
    <add key="WSGI_HANDLER" value="backend.wsgi.application" />

    <!-- ❹  Add the Django project root to PYTHONPATH -->
    <add key="PYTHONPATH" value="C:\inetpub\wwwroot\zetaslate\backend" />

    <!-- ❺  Persist ALL unhandled exceptions to a file (kept after deploys) -->
    <add key="WSGI_LOG" value="C:\inetpub\wwwroot\zetaslate\backend\django.log" />
  </appSettings>
</configuration>
